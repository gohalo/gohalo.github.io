<!doctype html><html lang=en-us><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="ie=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><title>使用 Hugo 制作静态博客 | GoHalo</title><link rel=apple-touch-icon sizes=180x180 href=https://gohalo.github.io/favicon/apple-touch-icon.png><link rel=icon href=https://gohalo.github.io/favicon/favicon.ico sizes=any><link rel=icon type=image/png sizes=32x32 href=https://gohalo.github.io/favicon/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=https://gohalo.github.io/favicon/favicon-16x16.png><link rel=manifest crossorigin=use-credentials href=https://gohalo.github.io/favicon/site.webmanifest><meta name=robots content="index, follow"><meta name=googlebot content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1"><meta name=bingbot content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1"><meta name=google-site-verification content="p7jJ5d3kF9yxRhpIo5GgHXAZ1ATKVyZhV2kf6mEGOv0"><meta name=description content="Hugo 采用开源的 goldmark 作为 markdown 的解析器，兼容 GitHub-Flavored Markdown 标准规范，很多的静态网站都是使用的Hugo，例如 K8S 的主页，这里介绍常见的使用技巧。
"><link rel=stylesheet href=https://gohalo.github.io/font-awesome/css/font-awesome.min.css><link rel=stylesheet href=/css/syntax.min.c70103877c799b924f50023b6b01eca010d7e2808885a74f9ea662cc47379ae1.css integrity="sha256-xwEDh3x5m5JPUAI7awHsoBDX4oCIhadPnqZizEc3muE=" crossorigin=anonymous><link rel=stylesheet href=/css/main.min.c4814ac9dc5fab259f313a787ded4f8e.css integrity="md5-xIFKydxfqyWfMTp4fe1Pjg==" crossorigin=anonymous><style type=text/css>.main p{text-indent:2em}.main li p{text-indent:0}</style><noscript><style>img.lazyload{display:none}</style></noscript></head><body><div class=sticky-top><div class=header-bar></div><nav class="navbar navbar-expand-lg navbar-light bg-light"><div class="container-xxl flex-wrap flex-lg-nowrap" aria-label="Main navigation"><a class="navbar-brand order-0" href=/cn aria-label=GoHalo>GoHalo</a>
<button class=navbar-toggler type=button data-bs-toggle=collapse data-bs-target=#navbarSupportedContent aria-controls=navbarSupportedContent aria-expanded=false aria-label="Toggle navigation">
<span class=navbar-toggler-icon></span></button><div class="collapse navbar-collapse" id=navbarSupportedContent><ul class="navbar-nav me-auto mb-2 mb-lg-0"><li class="nav-item dropdown"><a class="nav-link dropdown-toggle" href=# id=navbarDropdown role=button data-bs-toggle=dropdown aria-expanded=false>项目</a><ul class=dropdown-menu aria-labelledby=navbarDropdown><li><a class=dropdown-item href=/cn/project/bastion/>Bastion</a></li><li><a class="dropdown-item disabled" href=/cn/project/bootserver/>BootServer</a></li></ul></li><li class=nav-item><a class=nav-link aria-current=page href=/cn/blog/>博客</a></li><li class=nav-item><a class=nav-link aria-current=page href=/cn/blog/archives/>归档</a></li><li class=nav-item><a class=nav-link aria-current=page href=/cn/blog/tags/>标签</a></li><li class=nav-item><a class=nav-link aria-current=page href=/cn/slide/>幻灯片</a></li><li class=nav-item><a class=nav-link aria-current=page href=/cn/docs/>文档</a></li></ul><hr class="text-black-50 my-4 d-lg-none"><div class=dropdown><button class="btn dropdown-toggle" id=header-languages data-bs-toggle=dropdown aria-expanded=false data-bs-display=static>
中文</button><ul class="dropdown-menu dropdown-menu-lg-end me-lg-2 shadow rounded border-0" aria-labelledby=header-languages><li><a class=dropdown-item rel=alternate href=https://gohalo.github.io/en hreflang=en lang=en>English</a></li></ul></div><ul class="nav flex-column flex-lg-row"><li class=nav-item><a class="nav-link social-link" href=/cn/about><i class="fa fa-user" aria-hidden=true></i></a></li><li class=nav-item><a class="nav-link social-link" href=https://github.com/gohalo title=GitHub><i class="fa fa-github-alt" aria-hidden=true></i></a></li><li class=nav-item><button id=mode class="btn nav-link social-link" type=button aria-label="Toggle user interface mode">
<span class=toggle-dark><i class="fa fa-star" aria-hidden=true></i></span>
<span class=toggle-light><i class="fa fa-cog" aria-hidden=true></i></span></button></li></ul></div></div></nav></div><div class="main container-xxl" role=document><div class="blog row"><div class="col-md-12 col-xl-9 mt-4"><div class=header><h1>使用 Hugo 制作静态博客</h1><div class="meta mb-3"><i class="fa fa-calendar" aria-hidden=true></i>
<span class=mx-2>2021-04-29</span>
<i class="fa fa-tags" aria-hidden=true></i>
<a class=text-body href=https://gohalo.github.io/cn/tags/hugo/ role=button>hugo</a>
<a class=text-body href=https://gohalo.github.io/cn/tags/html/ role=button>html</a></div></div><hr><div class=content><p>Hugo 采用开源的 goldmark 作为 markdown 的解析器，兼容 GitHub-Flavored Markdown 标准规范，很多的静态网站都是使用的Hugo，例如 K8S 的主页，这里介绍常见的使用技巧。</p><a class=anchor id=简介></a><h1>简介 <a href=#%e7%ae%80%e4%bb%8b aria-hidden=true>#</a></h1><p>Hugo 是通过 GoLang 编写的静态网站页面，效率要比 Ruby 编写的 Jekyll 要高很多。可以直接从 <a href=https://github.com/gohugoio/hugo>Github</a> 上下载二进制包，然后解压添加到 <code>PATH</code> 路径下即可。</p><p>建议安装 <code>hugo-extended</code> 版本，其支持 SCSS 功能，适合于对主题的开发。另外，通过 <a href=https://github.com/yuin/goldmark>goldmark</a> 实现了很多扩展，最常用的就是任务列表，详细的清单可以参考 <a href=https://markdownguide.org/tools/hugo>MarkdownGuide</a> 中的介绍。</p><p>通过 Hugo 可以高度化定制，在设计时尽量能做到 Markdown 语法的兼容。</p><a class=anchor id=基本使用></a><h2>基本使用 <a href=#%e5%9f%ba%e6%9c%ac%e4%bd%bf%e7%94%a8 aria-hidden=true>#</a></h2><p>通过主题可以对页面进行定制，有很多主题可以选择，相见 <a href=https://themes.gohugo.io/>themes.gohugo.io</a>，以 <a href=https://themes.gohugo.io/hugo-geekdoc/>hugo-geekdoc</a> 为例，下载后直接放到项目的 themes 目录下即可。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>----- 检查安装是否成功
</span></span><span class=line><span class=cl>hugo version
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>----- 当前目录下新建项目
</span></span><span class=line><span class=cl>hugo new site hugo
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>----- 主题模板加到themes目录下，在配置文件config.toml中增加theme=&#34;doks&#34;或者通过--theme hyde参数启动
</span></span><span class=line><span class=cl>git clone --depth 1 --recursive https://github.com/h-enk/doks.git themes
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>----- 创建一篇文章
</span></span><span class=line><span class=cl>hugo --verbose new post/create-hugo-blog.md
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>----- 启动服务
</span></span><span class=line><span class=cl>hugo server --buildDrafts --bind=&#34;0.0.0.0&#34; --port=38787
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>----- 生成静态文件(含draft)，保存在buildDir目录下，默认是public
</span></span><span class=line><span class=cl>hugo -D
</span></span></code></pre></div><a class=anchor id=配置文件></a><h2>配置文件 <a href=#%e9%85%8d%e7%bd%ae%e6%96%87%e4%bb%b6 aria-hidden=true>#</a></h2><p>默认采用根目录下的 <code>hugo.toml</code> <code>hugo.yaml</code> <code>hugo.json</code> 等配置，可以通过 <code>--config a.toml,b.toml</code> 方式指定配置文件。不过推荐使用目录，默认为 <code>config</code> 目录，可以在配置文件中使用 <code>configDir</code> 配置项修改。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>hugo.toml
</span></span><span class=line><span class=cl>config/
</span></span><span class=line><span class=cl> |-_default/ 
</span></span><span class=line><span class=cl> | |-hugo.toml
</span></span><span class=line><span class=cl> | |-languages.toml
</span></span><span class=line><span class=cl> | |-menus.en.toml
</span></span><span class=line><span class=cl> | |-menus.cn.toml
</span></span><span class=line><span class=cl> | `-params.toml
</span></span><span class=line><span class=cl> |-develop/
</span></span><span class=line><span class=cl> | |-hugo.toml
</span></span><span class=line><span class=cl> | `-params.toml
</span></span><span class=line><span class=cl> `-production/
</span></span><span class=line><span class=cl>   `-hugo.toml
</span></span></code></pre></div><p>目录下第一层是环境，包括 <code>_default</code> 默认配置，常见一般还会配置 <code>production</code> 目录，例如，通过 <code>--environment production</code> 启动时，会将 <code>_default</code> 中的配置与 <code>production</code> 合并，在模板中可以通过如下方式检查。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>{{ if eq hugo.Environment &#34;production&#34; }}
</span></span><span class=line><span class=cl>&lt;div&gt; 生产模式 &lt;/div&gt;
</span></span><span class=line><span class=cl>{{ else }}
</span></span><span class=line><span class=cl>&lt;div&gt; 开发模式 &lt;/div&gt;
</span></span><span class=line><span class=cl>{{ end }}
</span></span></code></pre></div><p>第二层对应了配置项的顶层，常见的如 <code>[Params]</code> 对应 <code>params.toml</code>，<code>[Menu]</code> 对应了 <code>menu.toml</code> 包括了不同语言。</p><a class=anchor id=基本概念></a><h1>基本概念 <a href=#%e5%9f%ba%e6%9c%ac%e6%a6%82%e5%bf%b5 aria-hidden=true>#</a></h1><a class=anchor id=section></a><h2>Section <a href=#section aria-hidden=true>#</a></h2><p>基于 <code>content</code> 目录结构定义的页面集合，该目录下的第一级子目录都是一个 <code>section</code>，如果想让一个子目录成为 <code>section</code> 需要在目录下面定义 <code>_index.md</code> 文件，这样，所有的 <code>section</code> 就构成一个 <code>section tree</code> 。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>content/
</span></span><span class=line><span class=cl> `-blog/               &lt;-- Section, 因为是content的子目录
</span></span><span class=line><span class=cl>   |-funny-cats/
</span></span><span class=line><span class=cl>   | |-mypost.md
</span></span><span class=line><span class=cl>   | `-kittens/        &lt;-- Section, 因为包含_index.md
</span></span><span class=line><span class=cl>   |   `-_index.md
</span></span><span class=line><span class=cl>   `-tech/             &lt;-- Section, 同上
</span></span><span class=line><span class=cl>       `-_index.md
</span></span></code></pre></div><p>另外，除了通过上述 <code>Section</code> 对内容进行分类外，还允许 <code>Type</code> 自定义，如果页面中不存在，那么就会默认使用 <code>Section</code> 对应的值，使用时可以参考如下的查找顺序，可见模板 <code>Type</code> 优先级高于 <code>Section</code>，从而允许更好的自定义。</p><p>还可以根据不同的页面类型进行处理，包括了 <code>page</code> <code>section</code> <code>term</code> <code>home</code> <code>taxonomy</code> 等，也就是 <code>.Kind</code> 变量，可以参考官方 <a href=https://gohugo.io/methods/page/kind/>Methods Kind</a> 中的介绍。</p><a class=anchor id=模板></a><h1>模板 <a href=#%e6%a8%a1%e6%9d%bf aria-hidden=true>#</a></h1><p>Hugo 使用 GoLang 的 <code>html/template</code> 库作为模版引擎，分成了三种类型模版：</p><ul><li><code>single</code> 用于单个页面的渲染。</li><li><code>list</code> 渲染一组相关内容，例如一个目录下的所有内容。</li><li><code>partial</code> 可被其它模版引用，作为模版级别的组件，例如页面头部、页面底部等。</li></ul><p>其中 <code>baseof.html</code> 作为不同 <code>Section</code> 的根模板，有套模版查找机制，如果找不到与内容完全匹配的模板，它将向上移动一级并从那里搜索，其中，基本模版 <code>baseof.html</code> 的查找规则如下。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>01. /layouts/section/&lt;TYPE&gt;-baseof.html
</span></span><span class=line><span class=cl>02. /themes/&lt;THEME&gt;/layouts/section/&lt;TYPE&gt;-baseof.html   &lt;--- 不同Type的模板
</span></span><span class=line><span class=cl>03. /layouts/&lt;TYPE&gt;/baseof.html
</span></span><span class=line><span class=cl>04. /themes/&lt;THEME&gt;/layouts/&lt;TYPE&gt;/baseof.html
</span></span><span class=line><span class=cl>05. /layouts/section/baseof.html
</span></span><span class=line><span class=cl>06. /themes/&lt;THEME&gt;/layouts/section/baseof.html          &lt;--- 不同Section模板
</span></span><span class=line><span class=cl>07. /layouts/_default/&lt;TYPE&gt;-baseof.html
</span></span><span class=line><span class=cl>08. /themes/&lt;THEME&gt;/layouts/_default/&lt;TYPE&gt;-baseof.html
</span></span><span class=line><span class=cl>09. /layouts/_default/baseof.html
</span></span><span class=line><span class=cl>10. /themes/&lt;THEME&gt;/layouts/_default/baseof.html         &lt;--- 默认值
</span></span></code></pre></div><p>在模板中，通过 <code>{{ partial "xx" . }}</code> 引入 <code>Partials</code> 模块，模块中对应的页信息，可通过 <code>{{ . }}</code> 查看，另外，参数可以通过如下方式添加 <code>{{ partial "header.html" (dict "current" . "param1" "1" "param2" "2" ) }}</code> 。</p><p>除了上述的 <code>Partials</code> 引入方式之外，还可以通过 <code>{{ define "main" }} ... {{ end }}</code> 在不同的类型中(例如 <code>single</code> <code>list</code> 等)自定模块，然后以 <code>{{ block "main" . }} ... {{ end }}</code> 方式使用。</p><a class=anchor id=变量引用></a><h2>变量引用 <a href=#%e5%8f%98%e9%87%8f%e5%bc%95%e7%94%a8 aria-hidden=true>#</a></h2><p>在模板中通过 <code>{{ xxx }}</code> 方式引用变量，使用变量方式如下：</p><ul><li>全局配置，如 <code>.Site.Params.titile</code> 对应 <code>hugo.toml</code> 中的 <code>[Params]</code> 或 <code>config/_default/params.toml</code> 中配置。</li><li>页面参数，可以在开始指定，并通过 <code>.Params.xxx</code> 方式引用。</li><li>其它参数，包含了一些内置的参数，可以直接使用，例如 <code>.Title</code> <code>.Section</code> <code>.Content</code> <code>.Page</code> 。</li><li>本地化参数，常见如 <code>i18n "global-identifier"</code> 指定，或者 <code>i18n .Site.Params.xxx</code> 转换。</li><li>使用函数，例如 <code>hugo.Environment</code> <code>hugo.IsExtended</code> 等，其它可以参考 <a href=https://gohugo.io/functions/hugo/>Functions</a> 内容。</li></ul><p>除了上述的变量，还可以在 <code>data</code> 目录下保存 <code>json</code> <code>yaml</code> <code>toml</code> <code>xml</code> 等格式的数据文件，并通过 <code>.Site.Data.xxx</code> 方式在模板中进行引用。</p><a class=anchor id=基本语法></a><h2>基本语法 <a href=#%e5%9f%ba%e6%9c%ac%e8%af%ad%e6%b3%95 aria-hidden=true>#</a></h2><p>模板通过 <code>{{ }}</code> 包裹，其中的内容称为动作 (Action)，一般包含了两类：A) 数据求值，会直接输出到模板，包括直接使用变量；B) 控制结构，包括了条件、循环、函数等。</p><p>另外，可以对每行控制是否换行，通过 <code>-</code> 控制，例如 <code>{{- -}}</code> 为开始和结束均不换行，不过也可以最后压缩。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>----- 注释
</span></span><span class=line><span class=cl>{{/* comment */}}
</span></span><span class=line><span class=cl>----- 访问已经存在的变量，自定义变量
</span></span><span class=line><span class=cl>{{ .Title }}
</span></span><span class=line><span class=cl>{{ $var }}
</span></span><span class=line><span class=cl>{{ $var := &#34;Value&#34; }}
</span></span><span class=line><span class=cl>{{ $var := `Hello
</span></span><span class=line><span class=cl>World` }}
</span></span></code></pre></div><a class=anchor id=slice-vs-map></a><h3>Slice VS. Map <a href=#slice-vs-map aria-hidden=true>#</a></h3><p>其中 Slice 就对应了数组，常见操作如下。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>{{ $fruit := slice &#34;Apple&#34; &#34;Banana&#34; }}
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>{{ $fruit = append &#34;Cherry&#34; $fruit }}
</span></span><span class=line><span class=cl>{{ $fruit = append $fruit (slice &#34;Pear&#34;) }}
</span></span><span class=line><span class=cl>{{ $fruit = append (slice &#34;Cherry&#34; &#34;Peach&#34;) $fruit }}
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>{{ $fruit = uniq $fruit }}
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>{{ range $fruit }}
</span></span><span class=line><span class=cl>  I love {{ . }}
</span></span><span class=line><span class=cl>{{ end }}
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>{{ range $index, $value := $fruit }}
</span></span><span class=line><span class=cl>  {{ $value }} or {{ . }} is at index {{ $index }}
</span></span><span class=line><span class=cl>{{ end }}
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>{{ $first := first 2 $fruit }}
</span></span><span class=line><span class=cl>{{ $last := last 3 $fruit }}
</span></span><span class=line><span class=cl>{{ $third := first 3 $fruit | last 1 }}
</span></span><span class=line><span class=cl>{{ $third := index $fruit 2 }}
</span></span></code></pre></div><p>字典的使用方式如下。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-zed data-lang=zed><span class=line><span class=cl><span class=p>{{</span><span class=w> </span><span class=err>$</span><span class=n>hero</span><span class=w> </span><span class=o>:=</span><span class=w> </span><span class=n>dict</span><span class=w> </span><span class=err>&#34;</span><span class=n>firstame</span><span class=err>&#34;</span><span class=w> </span><span class=err>&#34;</span><span class=n>John</span><span class=err>&#34;</span><span class=w> </span><span class=err>&#34;</span><span class=n>lastname</span><span class=err>&#34;</span><span class=w> </span><span class=err>&#34;</span><span class=n>Lennon</span><span class=err>&#34;</span><span class=w> </span><span class=p>}}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>{{</span><span class=w> </span><span class=err>$</span><span class=n>hero</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>merge</span><span class=w> </span><span class=err>$</span><span class=n>hero</span><span class=w> </span><span class=p>(</span><span class=n>dict</span><span class=w> </span><span class=err>&#34;</span><span class=n>birth</span><span class=err>&#34;</span><span class=w> </span><span class=err>&#34;1940&#34;</span><span class=p>)</span><span class=w> </span><span class=p>}}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>{{</span><span class=w> </span><span class=err>$</span><span class=n>hero</span><span class=p>.</span><span class=n>firstame</span><span class=w> </span><span class=p>}}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>{{</span><span class=w> </span><span class=err>$</span><span class=n>firstname</span><span class=w> </span><span class=o>:=</span><span class=w> </span><span class=n>index</span><span class=w> </span><span class=err>$</span><span class=n>hero</span><span class=w> </span><span class=err>&#34;</span><span class=n>firstname</span><span class=err>&#34;</span><span class=w> </span><span class=p>}}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>{{</span><span class=w> </span><span class=n>range</span><span class=w> </span><span class=err>$</span><span class=n>key</span><span class=p>,</span><span class=w> </span><span class=err>$</span><span class=n>value</span><span class=w> </span><span class=o>:=</span><span class=w> </span><span class=err>$</span><span class=n>hero</span><span class=w> </span><span class=p>}}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=p>{{</span><span class=w> </span><span class=err>$</span><span class=n>key</span><span class=w> </span><span class=p>}}</span><span class=o>:</span><span class=w> </span><span class=p>{{</span><span class=w> </span><span class=err>$</span><span class=n>value</span><span class=w> </span><span class=p>}}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>{{</span><span class=w> </span><span class=n>end</span><span class=w> </span><span class=p>}}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>{{</span><span class=w> </span><span class=err>$</span><span class=n>basis</span><span class=w> </span><span class=o>:=</span><span class=w> </span><span class=err>&#34;</span><span class=n>lastname</span><span class=err>&#34;</span><span class=w> </span><span class=p>}}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>{{</span><span class=w> </span><span class=n>if</span><span class=w> </span><span class=n>eq</span><span class=w> </span><span class=err>$</span><span class=kn>relation</span><span class=w> </span><span class=err>&#34;</span><span class=n>friend</span><span class=err>&#34;</span><span class=w> </span><span class=p>}}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=p>{{</span><span class=w> </span><span class=err>$</span><span class=n>basis</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=err>&#34;</span><span class=n>firstname</span><span class=err>&#34;</span><span class=w> </span><span class=p>}}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>{{</span><span class=w> </span><span class=n>end</span><span class=w> </span><span class=p>}}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>Hello</span><span class=w> </span><span class=p>{{</span><span class=w> </span><span class=n>index</span><span class=w> </span><span class=err>$</span><span class=n>hero</span><span class=w> </span><span class=err>$</span><span class=n>basis</span><span class=w> </span><span class=p>}}</span><span class=o>!</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>{{</span><span class=w> </span><span class=n>range</span><span class=w> </span><span class=n>slice</span><span class=w> </span><span class=err>&#34;</span><span class=n>firstname</span><span class=err>&#34;</span><span class=w> </span><span class=err>&#34;</span><span class=n>lastname</span><span class=err>&#34;</span><span class=w> </span><span class=p>}}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=p>{{</span><span class=w> </span><span class=p>.</span><span class=w> </span><span class=p>}}</span><span class=o>:</span><span class=w> </span><span class=p>{{</span><span class=w> </span><span class=n>index</span><span class=w> </span><span class=err>$</span><span class=n>hero</span><span class=w> </span><span class=p>.</span><span class=w> </span><span class=p>}}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>{{</span><span class=w> </span><span class=n>end</span><span class=w> </span><span class=p>}}</span><span class=w>
</span></span></span></code></pre></div><p>使用时，可以通过 <code>{{ if reflect.IsSlice $value }}</code> 或者 <code>IsMap</code> 判断具体的类型。</p><a class=anchor id=逻辑判断></a><h3>逻辑判断 <a href=#%e9%80%bb%e8%be%91%e5%88%a4%e6%96%ad aria-hidden=true>#</a></h3><p>通过 <code>if</code> 语句来判断某个值的真假，不过建议使用 <code>with</code>，此时会在范围内重新绑定上下文。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>{{ if .IsHome }} xxx {{ end }}          // 当 IsHome 为 true 会调用，否通过 not
</span></span><span class=line><span class=cl>{{ if eq .Title &#34;Home&#34; }} xxx {{ end }} // 判断变量是否相等，不等 ne
</span></span><span class=line><span class=cl>{{ if and .IsHome .Params.show }} xxx {{ end }}   // 多个条件同时满足，某个满足 or
</span></span><span class=line><span class=cl>{{ if strings.Contains &#34;hugo&#34; &#34;go&#34; }} xxx {{end}} // 判断是否包含指定字符串
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>// 如下两种方式等价，如果为空则会跳过
</span></span><span class=line><span class=cl>{{ if isset .Params &#34;title&#34; }}
</span></span><span class=line><span class=cl>    &lt;h4&gt;{{ index .Params &#34;title&#34; }}&lt;/h4&gt;
</span></span><span class=line><span class=cl>{{ end }}
</span></span><span class=line><span class=cl>{{ with .Params.title }}
</span></span><span class=line><span class=cl>    &lt;h4&gt;{{ . }}&lt;/h4&gt;
</span></span><span class=line><span class=cl>{{ end }}
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>// 但是 if 可是使用 else if 语句
</span></span><span class=line><span class=cl>{{ if (isset .Params &#34;description&#34;) }}
</span></span><span class=line><span class=cl>    {{ index .Params &#34;description&#34; }}
</span></span><span class=line><span class=cl>{{ else if (isset .Params &#34;summary&#34;) }}
</span></span><span class=line><span class=cl>    {{ index .Params &#34;summary&#34; }}
</span></span><span class=line><span class=cl>{{ else }}
</span></span><span class=line><span class=cl>    {{ .Summary }}
</span></span><span class=line><span class=cl>{{ end }}
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>// 如下是一个稍微复杂的逻辑
</span></span><span class=line><span class=cl>{{ if (and (or (isset .Params &#34;title&#34;) (isset .Params &#34;caption&#34;)) (isset .Params &#34;attr&#34;)) }}
</span></span><span class=line><span class=cl>    &lt;div class=&#34;caption {{ index .Params &#34;attr&#34; }}&#34;&gt;
</span></span><span class=line><span class=cl>        {{ if (isset .Params &#34;title&#34;) }}
</span></span><span class=line><span class=cl>            &lt;h4&gt;{{ index .Params &#34;title&#34; }}&lt;/h4&gt;
</span></span><span class=line><span class=cl>        {{ end }}
</span></span><span class=line><span class=cl>        {{ if (isset .Params &#34;caption&#34;) }}
</span></span><span class=line><span class=cl>            &lt;p&gt;{{ index .Params &#34;caption&#34; }}&lt;/p&gt;
</span></span><span class=line><span class=cl>        {{ end }}
</span></span><span class=line><span class=cl>    &lt;/div&gt;
</span></span><span class=line><span class=cl>{{ end }}
</span></span></code></pre></div><p>如果 <code>Param</code> 设置了 <code>description</code> 属性，那么输出 <code>Param</code> 的 <code>description</code> 内容，否则输出 <code>Summary</code> 的内容。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>{{ with .Param &#34;description&#34; }}
</span></span><span class=line><span class=cl>    {{ . }}
</span></span><span class=line><span class=cl>{{ else }}
</span></span><span class=line><span class=cl>    {{ .Summary }}
</span></span><span class=line><span class=cl>{{ end }}
</span></span></code></pre></div><a class=anchor id=迭代></a><h3>迭代 <a href=#%e8%bf%ad%e4%bb%a3 aria-hidden=true>#</a></h3><p>对于字典数据可以通过 <code>{{ range $idx, $var := .Site.Data.xxx }}</code> 遍历，而数组则 <code>{{ range $arr }}</code> 方式遍历，同样以上述的 <code>Data</code> 为例，可以通过如下方式排序、过滤、获取数据。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>// 这里上下文访问的是数组元素，要访问全局上下文需要使用 $. 访问
</span></span><span class=line><span class=cl>{{ range $array }}
</span></span><span class=line><span class=cl>    {{ . }}
</span></span><span class=line><span class=cl>{{ end }}
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>// 可以声明变量、元素索引
</span></span><span class=line><span class=cl>{{ range $val := $array }}
</span></span><span class=line><span class=cl>    {{ $val }}
</span></span><span class=line><span class=cl>{{ end }}
</span></span><span class=line><span class=cl>{{ range $idx, $val := $array }}
</span></span><span class=line><span class=cl>   {{ $idx }} -- {{ $val }}
</span></span><span class=line><span class=cl>{{ end }}
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>// 为 map 元素的索引和值声明变量
</span></span><span class=line><span class=cl>{{ range $key, $val := $map }}
</span></span><span class=line><span class=cl>   {{ $key }} -- {{ $val }}
</span></span><span class=line><span class=cl>{{ end }}
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>// 当传入的参数为空时，执行 else 语句
</span></span><span class=line><span class=cl>{{ range $array }}
</span></span><span class=line><span class=cl>    {{ . }}
</span></span><span class=line><span class=cl>{{else}}
</span></span><span class=line><span class=cl>    // 在 $array 为空时才会执行
</span></span><span class=line><span class=cl>{{ end }}
</span></span></code></pre></div><p>另外，还可以使用如下方式。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>&lt;ul&gt;
</span></span><span class=line><span class=cl>  {{ range sort .Site.Data.books.fiction &#34;title&#34; }}
</span></span><span class=line><span class=cl>    &lt;li&gt;{{ .title }} ({{ .author }})&lt;/li&gt;
</span></span><span class=line><span class=cl>  {{ end }}
</span></span><span class=line><span class=cl>&lt;/ul&gt;
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>{{ range where .Site.Data.books.fiction &#34;isbn&#34; &#34;978-0140443530&#34; }}
</span></span><span class=line><span class=cl>  &lt;li&gt;{{ .title }} ({{ .author }})&lt;/li&gt;
</span></span><span class=line><span class=cl>{{ end }}
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>{{ index .Site.Data.books &#34;historical-fiction&#34; }}
</span></span></code></pre></div><p>这样就可以根据不同变量进行过滤等，对于 <code>.Site.Pages</code> 等内置变量也相同。</p><p>如下是条件过滤的处理。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>{{- if and (isset .Params &#34;math&#34;) (eq .Params.math true) }}
</span></span><span class=line><span class=cl>{{- end -}}
</span></span></code></pre></div><a class=anchor id=过滤页面></a><h3>过滤页面 <a href=#%e8%bf%87%e6%bb%a4%e9%a1%b5%e9%9d%a2 aria-hidden=true>#</a></h3><p>如下是一个先过滤当前 Section 的数据，同时页面需要设置 <code>class: "page"</code> 选项，先按照年份聚合，然后再按照日期的倒序进行排序，显示日期以及对应的标题信息。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>{{ $blogs := where (where .Site.Pages &#34;Section&#34; .Section) &#34;Params.Class&#34; &#34;==&#34; &#34;page&#34; -}}
</span></span><span class=line><span class=cl>{{ range $blogs.GroupByDate &#34;2006&#34; &#34;desc&#34; }}
</span></span><span class=line><span class=cl>&lt;h1&gt;{{ .Key }}&lt;/h1&gt;
</span></span><span class=line><span class=cl>&lt;ul&gt;
</span></span><span class=line><span class=cl>{{ range .Pages.ByDate.Reverse }}
</span></span><span class=line><span class=cl>  &lt;li&gt;&lt;span&gt;{{ .Date.Format &#34;2006-01-02&#34; }}&lt;/span&gt; &lt;a href=&#34;{{ .RelPermalink }}&#34;&gt;{{ .Title }}&lt;/a&gt;&lt;/li&gt;
</span></span><span class=line><span class=cl>{{ end }}
</span></span><span class=line><span class=cl>&lt;/ul&gt;
</span></span><span class=line><span class=cl>{{ end }}
</span></span></code></pre></div><p>页面上可用变量可以通过 <a href=https://gohugo.io/variables/page/>Page Variables</a> 查看，如果直接通过 <code>{{ . }}</code> 打印会显示文件所在路径。</p><p>其它常用使用示例如下。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>{{ range .Data.Pages }}                        // 遍历 Data.Pages
</span></span><span class=line><span class=cl>{{ range where .Data.Pages &#34;Section&#34; &#34;blog&#34; }} // 遍历 Data.Pages，过滤 Section 为 blog 的数据
</span></span><span class=line><span class=cl>{{ range first 10 .Data.Pages }}               // 遍历 Data.Pages，取前10条数据
</span></span><span class=line><span class=cl>{{ range last 10 .Data.Pages }}                // 遍历 Data.Pages，取后10条数据
</span></span><span class=line><span class=cl>{{ range after 10 .Data.Pages }}               // 遍历 Data.Pages，取第10条数据之后的数据
</span></span><span class=line><span class=cl>{{ range until 10 .Data.Pages }}               // 遍历 Data.Pages，取第10条数据之前的数据
</span></span></code></pre></div><a class=anchor id=短代码></a><h2>短代码 <a href=#%e7%9f%ad%e4%bb%a3%e7%a0%81 aria-hidden=true>#</a></h2><p>ShortCodes 主要是为处理一些 Markdown 不方便表示的处理逻辑，从而省略了一些原始 <code>html</code> 代码的编写，<a href=https://gohugo.io/content-management/shortcodes>官方</a> 提供了一些默认的实现，例如一些视频网站的链接、<code>relref</code> 等，源码可以参考 <a href=https://github.com/gohugoio/hugo/tree/master/tpl/tplimpl/embedded/templates/shortcodes>Github</a> 。</p><p>假设有个 <code>foobar</code> 的 ShortCode，可以通过如下方式使用，注意，参数的包裹方式，当前暂未找到比较好的禁止渲染方法。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>{{ foobar &#34;foo&#34; &#34;bar&#34; }}
</span></span><span class=line><span class=cl>Some short codes
</span></span><span class=line><span class=cl>{{ /foobar }}
</span></span></code></pre></div><p>上述的参数在 ShortCode 模板中有几种获取方式：通过 <code>with .Get 0</code> 获取，最简单直接；或者，通过 <code>index .Params 0</code> 获取，而其中的内容，则可以通过 <code>.Inner</code> 方式读取，而且会要求必须要调用。</p><p>另外，还可以参考 <a href=https://github.com/squidfingers/hugo-shortcodes>Hugo ShortCodes</a> 中的一些示例。</p><a class=anchor id=常用函数></a><h2>常用函数 <a href=#%e5%b8%b8%e7%94%a8%e5%87%bd%e6%95%b0 aria-hidden=true>#</a></h2><p>在模板中可以通过 <code>{{ with .Site.Data.Resume . }} {{ .SomeData }} {{ end }}</code> 方式引用。</p><a class=anchor id=高级进阶></a><h1>高级进阶 <a href=#%e9%ab%98%e7%ba%a7%e8%bf%9b%e9%98%b6 aria-hidden=true>#</a></h1><a class=anchor id=静态文件></a><h2>静态文件 <a href=#%e9%9d%99%e6%80%81%e6%96%87%e4%bb%b6 aria-hidden=true>#</a></h2><p>包括了图片、CSS、Javascript 等，通常是现有的文件，例如三方库 Bootstrap、FontAwesome 等，引用时需要放到 <code>static</code> 目录下，模板中需要放到对应目录下，会自动复制。</p><p>可通过 <code>{{ "css/bootstrap.min.css" | absURL }}</code> 这种方式引用，此时访问 <code>http://foobar.com/css/bootstrap.min.css</code> 是，会影射到 <code>static/css/bootstrap.min.css</code> 文件。</p><a class=anchor id=mounts></a><h3>Mounts <a href=#mounts aria-hidden=true>#</a></h3><p>可以通过 <code>npm</code> 管理三方的 JS 包，不过此时需要在配置文件中通过 <code>module.mounts</code> 配置。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-toml data-lang=toml><span class=line><span class=cl><span class=p>[</span><span class=nx>module</span><span class=p>]</span>
</span></span><span class=line><span class=cl>  <span class=p>[[</span><span class=nx>module</span><span class=p>.</span><span class=nx>mounts</span><span class=p>]]</span>
</span></span><span class=line><span class=cl>    <span class=nx>source</span> <span class=p>=</span> <span class=s2>&#34;node_modules/katex/dist&#34;</span>
</span></span><span class=line><span class=cl>    <span class=nx>target</span> <span class=p>=</span> <span class=s2>&#34;static/katex&#34;</span>
</span></span></code></pre></div><p>然后在模板中可以通过如下方式使用。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>script</span> <span class=na>type</span><span class=o>=</span><span class=s>&#34;text/javascript&#34;</span> <span class=na>src</span><span class=o>=</span><span class=s>&#34;{{ &#34;</span><span class=na>katex</span><span class=err>/</span><span class=na>katex</span><span class=err>.</span><span class=na>min</span><span class=err>.</span><span class=na>js</span><span class=err>&#34;</span> <span class=err>|</span> <span class=na>absURL</span> <span class=err>}}&#34;</span><span class=p>&gt;&lt;/</span><span class=nt>script</span><span class=p>&gt;</span>`
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>link</span> <span class=na>rel</span><span class=o>=</span><span class=s>&#34;stylesheet&#34;</span> <span class=na>href</span><span class=o>=</span><span class=s>&#34;{{ &#34;</span><span class=na>katex</span><span class=err>/</span><span class=na>katex</span><span class=err>.</span><span class=na>min</span><span class=err>.</span><span class=na>css</span><span class=err>&#34;</span> <span class=err>|</span> <span class=na>absURL</span> <span class=err>}}&#34;</span><span class=p>/&gt;</span>
</span></span></code></pre></div><a class=anchor id=css></a><h3>CSS <a href=#css aria-hidden=true>#</a></h3><p>从 0.43 版本之后，Hugo 就支持了 SASS 的编译，不过只能把源文件放到 <code>/assets/scss/</code> 或 <code>/themes/&lt;NAME>/assets/scss/</code> 目录下，然后，通过如下方式引入。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>{{ $opts := dict &#34;transpiler&#34; &#34;libsass&#34; &#34;targetPath&#34; &#34;css/style.css&#34; }}
</span></span><span class=line><span class=cl>{{ with resources.Get &#34;sass/main.scss&#34; | toCSS $opts | minify | fingerprint }}
</span></span><span class=line><span class=cl>  &lt;link rel=&#34;stylesheet&#34; href=&#34;{{ .RelPermalink }}&#34; integrity=&#34;{{ .Data.Integrity }}&#34; crossorigin=&#34;anonymous&#34;&gt;
</span></span><span class=line><span class=cl>{{ end }}
</span></span></code></pre></div><p>通过 <code>resouces.Get</code> 获取 SCSS 文件内容，接着通过管道编译、压缩、生成指纹，这样可以给生成文件加上 hash 文件名，这样可以从 CDN 拉取最新的 CSS 而不是缓存的老文件。另外，在编译 CSS 时的配置选项除了上述，还可参考如下。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>{{ $opts := (dict &#34;outputStyle&#34; &#34;compressed&#34; &#34;enableSourceMap&#34; true &#34;includePaths&#34; (slice &#34;node_modules&#34;)) -}}
</span></span></code></pre></div><p>代码高亮可以通过如下命令生成，示例可以参考 <a href=https://xyproto.github.io/splash/docs/longer/all.html>Style Longer</a> 以及 <a href=https://xyproto.github.io/splash/docs/all.html>Style</a>。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>hugo gen chromastyles --style=monokai &gt; syntax.css
</span></span></code></pre></div><p>注意，配置参数要设置 <code>codeFences=true</code>，否则行号等信息会通过表格方式显示，会导致显示异常。</p><a class=anchor id=javascript></a><h3>JavaScript <a href=#javascript aria-hidden=true>#</a></h3><p>与 CSS 类似，可以通过如下方式引入 JS 脚本</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>{{ $params := dict &#34;api&#34; &#34;https://example.org/api&#34; }}
</span></span><span class=line><span class=cl>{{ with resources.Get &#34;js/main.js&#34; }}
</span></span><span class=line><span class=cl>  {{ if hugo.IsDevelopment }}
</span></span><span class=line><span class=cl>    {{ with . | js.Build }}
</span></span><span class=line><span class=cl>      &lt;script src=&#34;{{ .RelPermalink }}&#34;&gt;&lt;/script&gt;
</span></span><span class=line><span class=cl>    {{ end }}
</span></span><span class=line><span class=cl>  {{ else }}
</span></span><span class=line><span class=cl>    {{ $opts := dict &#34;minify&#34; true &#34;params&#34; $params }}
</span></span><span class=line><span class=cl>    {{ with . | js.Build $opts | fingerprint }}
</span></span><span class=line><span class=cl>      &lt;script src=&#34;{{ .RelPermalink }}&#34; integrity=&#34;{{ .Data.Integrity }}&#34; crossorigin=&#34;anonymous&#34;&gt;&lt;/script&gt;
</span></span><span class=line><span class=cl>    {{ end }}
</span></span><span class=line><span class=cl>  {{ end }}
</span></span><span class=line><span class=cl>{{ end }}
</span></span></code></pre></div><p>在脚本中可以通过 <code>import * as params from '@params';</code> 方式引用参数，甚至可以通过 Shims 方式引入 React 代码，更多功能可以参考 <a href=https://gohugo.io/hugo-pipes/js/>Hugo JS</a>。</p><a class=anchor id=图片渲染></a><h2>图片渲染 <a href=#%e5%9b%be%e7%89%87%e6%b8%b2%e6%9f%93 aria-hidden=true>#</a></h2><p>在 hugo 中定制图片格式比较麻烦，不支持类似 <code>![name](uri){: width="420"}</code> 这种方式，因为支持直接使用 <code>html</code>，所以，可以通过如下的方式进行配置。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>img</span> <span class=na>src</span><span class=o>=</span><span class=s>&#34;picture.png&#34;</span> <span class=na>alt</span><span class=o>=</span><span class=s>&#34;some message&#34;</span> <span class=na>with</span><span class=o>=</span><span class=s>&#34;50%&#34;</span> <span class=p>/&gt;</span>
</span></span></code></pre></div><p>可以在 <code>css</code> 中定制 <code>img</code> 对齐方式，不过此时就只能使用一种了。另外，官方提供了 <code>figure</code> 的 shortcodes 代码，可以使用，但是会导致不同的平台的兼容性问题。</p><p>还有一种方式，在 <code>layouts/_default/_markup/render-image.html</code> 中定制图片的渲染方式，然后通过 <code>![name](uri?width=100px)</code> 这种类似方式使用，不过支持的参数需要在上述文件中配置。</p><p>更多其它的渲染 Hooks 可以参考 <a href=https://gohugo.io/render-hooks>Render Hooks</a> 内容。</p><a class=anchor id=数据传递></a><h2>数据传递 <a href=#%e6%95%b0%e6%8d%ae%e4%bc%a0%e9%80%92 aria-hidden=true>#</a></h2><p>通过 <code>Scratch</code> 可以传递数据，用于在 <code>Page</code> 和 <code>ShortCodes</code> 间传递数据，如果要在模板中使用临时的数据传递，那么可以通过 <code>newScratch</code> 新建，如下以 Hugo 自动生成的 <code>Scratch</code> 为例，如下使用 <code>.Page.Scratch</code> 和 <code>.Scratch</code> 的作用相同。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>{{ .Scratch.Set &#34;hey&#34; &#34;Hello&#34; }} # 还可以是 3 或者 (slice &#34;Hello&#34; &#34;World&#34;)
</span></span><span class=line><span class=cl>{{ .Scratch.Get &#34;hey&#34; }}         # 获取
</span></span><span class=line><span class=cl>{{ .Scratch.Add &#34;hey&#34; &#34;Welcome&#34; }} # 执行加法，类似Go语言，字符串拼接、数值相加、数组拼接
</span></span><span class=line><span class=cl>{{ .Scratch.GetSortedMapValues &#34;hey&#34; }} # 除了通过Get获取map之外，还可以返回以key排序的value值
</span></span><span class=line><span class=cl>{{ .Scratch.Delete &#34;hey&#34; }}      # 删除
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>{{ .Scratch.SetInMap &#34;hey&#34; &#34;Hello&#34; &#34;World&#34; }} # 设置map，对应 key:value 为 Hello:World
</span></span><span class=line><span class=cl>{{ .Scratch.SetInMap &#34;hey&#34; &#34;Hey&#34; &#34;Andy&#34; }}
</span></span><span class=line><span class=cl>{{ .Scratch.Get &#34;hey&#34; }} # map[Hello:World Hey:Andy]
</span></span></code></pre></div><a class=anchor id=模板调试></a><h2>模板调试 <a href=#%e6%a8%a1%e6%9d%bf%e8%b0%83%e8%af%95 aria-hidden=true>#</a></h2><p>可以通过 <code>{{ printf "%#v" .Permalink }}</code> 打印当前的变量信息。另外，如果要调试页面布局，可以在 <code>&lt;head></code> 中添加如下的内容，方便查看。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>style</span><span class=p>&gt;</span> 
</span></span><span class=line><span class=cl><span class=nt>div</span> <span class=p>{</span> 
</span></span><span class=line><span class=cl>  <span class=k>border</span><span class=p>:</span> <span class=mi>1</span><span class=kt>px</span> <span class=kc>solid</span> <span class=kc>black</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=k>background-color</span><span class=p>:</span> <span class=n>LightSkyBlue</span><span class=p>;</span> 
</span></span><span class=line><span class=cl><span class=p>}</span> 
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>style</span><span class=p>&gt;</span>
</span></span></code></pre></div><a class=anchor id=打印配置></a><h2>打印配置 <a href=#%e6%89%93%e5%8d%b0%e9%85%8d%e7%bd%ae aria-hidden=true>#</a></h2><p>在打印时，尤其是类似简历这种，对应 A4 会被识别为小屏幕，从而导致实际打印效果不太好，可以添加如下配置。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-css data-lang=css><span class=line><span class=cl><span class=p>@</span><span class=k>media</span> <span class=nt>print</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=p>@</span><span class=k>page</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nt>size</span><span class=o>:</span> <span class=nt>210mm</span> <span class=nt>297mm</span><span class=o>;</span> 
</span></span><span class=line><span class=cl>        <span class=nt>margin</span><span class=p>:</span><span class=nd>0mm</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>.</span><span class=nc>col-md-4</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>width</span><span class=p>:</span> <span class=mf>33.3</span><span class=kt>%</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>.</span><span class=nc>col-md-8</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>width</span><span class=p>:</span> <span class=mf>66.7</span><span class=kt>%</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>网页打印默认采用了 <code>96dpi</code>，而 <code>A4</code> 尺寸为 <code>210x297mm</code>，可以计算出来分辨率 <code>794x1123px</code>，另外，IE 浏览器会设置 <code>19.05mm</code> 边距，所以对应了 <code>171.9x258.9mm</code> <code>649x978px</code> 。</p><a class=anchor id=图片表情></a><h2>图片表情 <a href=#%e5%9b%be%e7%89%87%e8%a1%a8%e6%83%85 aria-hidden=true>#</a></h2><p>支持 Emojis 表情，可以直接复制，例如 😀 ，也可以通过 :grinning: 表示，也就是 <code>:grinning:</code> 表示，需要在配置中增加 <code>enableEmoji=true</code> 参数开启，详见 <a href=https://gohugo.io/quick-reference/emojis/>Emojis</a> 中的介绍。</p><p>这里建议通过复制方式使用，否则有些场景下可能会被误渲染。</p><a class=anchor id=相关文章></a><h2>相关文章 <a href=#%e7%9b%b8%e5%85%b3%e6%96%87%e7%ab%a0 aria-hidden=true>#</a></h2><p>Hugo 默认提供了 <a href=https://gohugo.io/content-management/related/>Related Content</a> 配置相关文章，默认通过 <code>keywords</code> <code>date</code> <code>tags</code> 进行相关性的匹配。</p><a class=anchor id=最佳实践></a><h1>最佳实践 <a href=#%e6%9c%80%e4%bd%b3%e5%ae%9e%e8%b7%b5 aria-hidden=true>#</a></h1><p>其中顶层目录包含了 <code>archetypes</code> <code>assets</code> <code>content</code> <code>data</code> <code>i18n</code> <code>static</code> <code>layouts</code> 几个，</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>archetypes/          通过new子命令新建文章时的模板
</span></span><span class=line><span class=cl>config/              默认使用hugo.[toml|yaml|json]作为配置，可以使用如下目录方式
</span></span><span class=line><span class=cl> |-_default/         默认配置
</span></span><span class=line><span class=cl> `-production/       全局配置
</span></span><span class=line><span class=cl>i18n/                本地化
</span></span><span class=line><span class=cl>themes/
</span></span><span class=line><span class=cl> |-halo/             对应的模板名
</span></span><span class=line><span class=cl>   |-assets/         模板中的资源文件
</span></span><span class=line><span class=cl>   | |-images/
</span></span><span class=line><span class=cl>   | |-js/           JavaScript相关脚本，详见 footer/script-footer.html
</span></span><span class=line><span class=cl>   | |-scss/         SCSS文件
</span></span><span class=line><span class=cl>   | | `-app.scss    顶层的SCSS文件，会包含其它目录下的文件，详见 head/head.html
</span></span><span class=line><span class=cl>   | `-static/       静态文件
</span></span><span class=line><span class=cl>   |   `-syntax.css  上述通过hugo gen chromastyles命令生成的CSS文件，详见 head/head.html
</span></span><span class=line><span class=cl>   |-layouts/        布局模板，其中 _default 是默认，而 partials 是不同模板的引用
</span></span><span class=line><span class=cl>     |-_default/
</span></span><span class=line><span class=cl>     |-blog/         对应 blog Section 模板
</span></span><span class=line><span class=cl>     |-docs/         对应 docs Section 模板
</span></span><span class=line><span class=cl>     |-partials/     不同模板中的引用
</span></span><span class=line><span class=cl>     |-resume/       对应 resume Section 模板
</span></span><span class=line><span class=cl>     | |-baseof.html 渲染用的根页面
</span></span><span class=line><span class=cl>     |-shortcodes/   短代码
</span></span><span class=line><span class=cl>     |-slide/        对应 slide Section 模板
</span></span><span class=line><span class=cl>     |-404.html      生成404页面
</span></span></code></pre></div><p>其中 CSS 相关内容依赖如下几个文件：A) <code>syntax.css</code> 语法高亮，只需要压缩即可；B) <code>main.css</code> 核心的自定义配置，为了使用 <code>bootstrap</code> 变量，同时会在 <code>scss</code> 模板中引用，所以，无需再单独引入 <code>bootstrap.min.css</code> 即可；C) <code>fontawesome.min.css</code> 使用的图标，可以参考 <a href=https://fontawesome.com/v4/icons/>Icons</a> 中的内容。</p><p>另外，Bootstrap 的相关变量保存在 <code>bootstrap/scss/_variables.scss</code> 中。</p><a class=anchor id=标签></a><h2>标签 <a href=#%e6%a0%87%e7%ad%be aria-hidden=true>#</a></h2><p>通过默认的 <code>tags</code> <code>keywords</code> 配置关联文章，其中 <code>keywords</code> 按照文章类型添加，而 <code>tags</code> 则包含如下常见的分类。</p><ul><li><code>topic</code> 专题文章，会将某些文章集中梳理、展示。</li><li><code>language</code> 编程相关，细分为 <code>c/cpp</code> <code>lua</code> <code>bash</code> <code>rust</code> <code>java</code> <code>python</code> <code>golang</code> <code>web</code> <code>css</code> <code>html</code> 具体语言。</li><li><code>database</code> 数据库相关，细分为 <code>mysql</code> 等。</li><li><code>linux</code> 操作系统相关，细分为 <code>kvm</code> <code>network</code> <code>command</code> <code>vim</code> <code>ebpf</code> 等。</li><li><code>security</code> 安全相关，细分为 <code>ssh</code> <code>tls/ssl</code> 等。</li><li><code>container</code> 容器相关内容，细分为 <code>docker</code>、<code>k8s</code> 等。</li><li><code>warehouse</code> 大数据相关内容，细分为 <code>hudi</code> 等。</li><li><code>devops</code> 运维开发相关工具，细分为 <code>git</code> 等。</li><li><code>algorithm</code> <code>structure</code> 算法数据结构相关。</li><li><code>example</code> 包含相关的示例代码、<code>cheatsheet</code> 常用命令行整理、<code>software</code> 相对命令行要更系统。</li></ul><p>每篇文章标题下方的标签列表可以用来跳转，此时会通过模板中的 <code>layouts/_default/list.html</code> 进行渲染。</p><a class=anchor id=其它></a><h2>其它 <a href=#%e5%85%b6%e5%ae%83 aria-hidden=true>#</a></h2><p>很多项目中可以通过 Markdown 维护文档，这里的模板也支持，使用方式如下。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>cd content/cn
</span></span><span class=line><span class=cl>ln -s /your/code/docs/path foobar
</span></span></code></pre></div><p>然后通过 <code>/cn/foobar/</code> 访问即可，此时文档的维护层级如下。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>|-_index.md      必须存在，会使用 layouts/_default/list.html 渲染
</span></span><span class=line><span class=cl>|-basic.md       basic/ 可以使用这种方式，相对链接可通过 ../metric/nginx 类似方式引用
</span></span><span class=line><span class=cl>|-metric/
</span></span><span class=line><span class=cl>| |-nginx.md     metric/nginx/ 一般就是底层页面了
</span></span><span class=line><span class=cl>| `-system/      无法引用，也可以增加 system.md 文件
</span></span><span class=line><span class=cl>|   |-cpu.md     metric/system/cpu/
</span></span><span class=line><span class=cl>|   `-load.md    metric/system/load/
</span></span><span class=line><span class=cl>|-metric.md      metric/ 可以使用相对引用，引用 metric/ 目录下的文件
</span></span><span class=line><span class=cl>`-query/
</span></span><span class=line><span class=cl>  `-files.md
</span></span></code></pre></div><a class=anchor id=导航遮挡></a><h4>导航遮挡 <a href=#%e5%af%bc%e8%88%aa%e9%81%ae%e6%8c%a1 aria-hidden=true>#</a></h4><p>实际看下来可以通过 <code>CSS</code> 修改，有如下几种方式。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-css data-lang=css><span class=line><span class=cl><span class=p>:</span><span class=nd>target</span><span class=p>::</span><span class=nd>before</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>content</span><span class=p>:</span> <span class=s2>&#34;&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>display</span><span class=p>:</span> <span class=kc>block</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>height</span><span class=p>:</span> <span class=mi>80</span><span class=kt>px</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>margin</span><span class=p>:</span> <span class=mi>-80</span><span class=kt>px</span> <span class=mi>0</span> <span class=mi>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>这种方式如果 <code>hN</code> 设置了背景色，那么会导致选中后背景色扩大，这里就修改为如下方式。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>----- 修改 layouts/_default/_markup/render-heading.html 如下，增加&lt;a&gt;但隐藏
</span></span><span class=line><span class=cl>&lt;a class=&#34;anchor&#34; id=&#34;{{.Anchor | safeURL}}&#34;&gt;&lt;/a&gt;
</span></span><span class=line><span class=cl>&lt;h{{ .Level }}&gt;{{ .Text | safeHTML }} &lt;a href=&#34;#{{ .Anchor | safeURL }}&#34; aria-hidden=&#34;true&#34;&gt;#&lt;/a&gt;&lt;/h{{ .Level }}&gt;
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>.anchor {
</span></span><span class=line><span class=cl>    display: block;
</span></span><span class=line><span class=cl>    position: relative;
</span></span><span class=line><span class=cl>    top: -80px;
</span></span><span class=line><span class=cl>    visibility: hidden;
</span></span><span class=line><span class=cl>}
</span></span></code></pre></div><a class=anchor id=todo></a><h2>TODO <a href=#todo aria-hidden=true>#</a></h2><ul><li><input checked disabled type=checkbox> 侧边栏 TOC，点击锚点元素时默认是到页面顶部，如果顶部有 <code>fixed</code> 定位，就会遮挡部分。</li><li><input disabled type=checkbox> 侧边栏 TOC，支持 ScrollSpy 功能。</li><li><input disabled type=checkbox> 代码的复制按钮可以优化为默认不显示，当鼠标移动到代码框后再显示复制、语言信息，这样会更加友好。</li></ul><a class=anchor id=参考></a><h1>参考 <a href=#%e5%8f%82%e8%80%83 aria-hidden=true>#</a></h1><ul><li><a href=https://gohugo.io/documentation/>Hugo Docs</a> 官方文档，可以参考常见的函数，<a href=https://themes.gohugo.io/>Hugo Themes</a> 包含了很多个网站的示例。</li><li><a href=https://mermaid-js.github.io/mermaid/>Mermaid</a> 绘制流程图的方法，<a href=https://www.wappalyzer.com/>www.wappalyzer.com</a> 用来分析某个网站所用的技术栈。</li></ul></div></div><div class="sidebar col-xl-3 mt-2"><div id=toc class=position-fixed><nav id=TableOfContents><ul><li><a href=#简介>简介</a><ul><li><a href=#基本使用>基本使用</a></li><li><a href=#配置文件>配置文件</a></li></ul></li><li><a href=#基本概念>基本概念</a><ul><li><a href=#section>Section</a></li></ul></li><li><a href=#模板>模板</a><ul><li><a href=#变量引用>变量引用</a></li><li><a href=#基本语法>基本语法</a></li><li><a href=#短代码>短代码</a></li><li><a href=#常用函数>常用函数</a></li></ul></li><li><a href=#高级进阶>高级进阶</a><ul><li><a href=#静态文件>静态文件</a></li><li><a href=#图片渲染>图片渲染</a></li><li><a href=#数据传递>数据传递</a></li><li><a href=#模板调试>模板调试</a></li><li><a href=#打印配置>打印配置</a></li><li><a href=#图片表情>图片表情</a></li><li><a href=#相关文章>相关文章</a></li></ul></li><li><a href=#最佳实践>最佳实践</a><ul><li><a href=#标签>标签</a></li><li><a href=#其它>其它</a></li><li><a href=#todo>TODO</a></li></ul></li><li><a href=#参考>参考</a></li></ul></nav></div></div></div></div><footer class="footer text-muted"><div class=container-xxl><div class=row><div class=text-center>Built by GoHalo, generated with <a class=text-muted href=https://gohugo.io>Hugo</a>, and hosted on GitHub Pages</div></div><div class=row><div class=text-center>Copyright © 2013-2025 GoHalo. All Rights Reserved.</div></div></div></footer><script src=https://gohalo.github.io/bootstrap/js/bootstrap.bundle.min.js></script>
<script src=/main.b9cbcb174709877512d64e24f297f66a40c8d91c9a81128cb04bdd7b10247df8.js integrity="sha256-ucvLF0cJh3US1k4k8pf2akDI2RyagRKMsEvdexAkffg=" crossorigin=anonymous></script>
<a href=# class="btn btn-light btn-lg backtop" title=返回顶部><i class="fa fa-angle-double-up" aria-hidden=true></i></a></body></html>